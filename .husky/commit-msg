#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Проверка формата сообщения коммита (Conventional Commits)
commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .{1,50}'

if ! grep -qE "$commit_regex" "$1"; then
    echo "❌ Неверный формат сообщения коммита!"
    echo ""
    echo "Используйте формат: type(scope): description"
    echo ""
    echo "Типы:"
    echo "  feat:     новая функциональность"
    echo "  fix:      исправление ошибки"
    echo "  docs:     изменения в документации"
    echo "  style:    форматирование, отсутствие точки с запятой и т.д."
    echo "  refactor: рефакторинг кода"
    echo "  test:     добавление или изменение тестов"
    echo "  chore:    изменения в сборке или вспомогательных инструментах"
    echo ""
    echo "Примеры:"
    echo "  feat(button): add new variant prop"
    echo "  fix(modal): resolve focus management issue"
    echo "  test(select): add comprehensive prop tests"
    echo ""
    exit 1
fi

echo "✅ Формат сообщения коммита корректен!"
